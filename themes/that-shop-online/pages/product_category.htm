title = "Category"
url = "/category/:page?"
layout = "default"
is_hidden = 0
robot_index = "index"
robot_follow = "follow"

[builderList]
modelClass = "Tai\Products\Models\Products"
scope = "-"
displayColumn = "name"
noRecordsMessage = "No records found"
detailsPage = "product-detail"
detailsKeyColumn = "id"
detailsUrlParameter = ":id"
recordsPerPage = 10
pageNumber = "{{ :page }}"
==
<?
	use Illuminate\Support\Facades\Session;

	function onStart(){
		$maxitem = input('maxitem');
		if ($maxitem) {
			Session::put('maxitem', $maxitem);
		}

		$maxitem =Session::get('maxitem', 10);

		$this->builderList->setProperty('recordsPerPage', $maxitem);
	}
?>
==
{% set records = builderList.records %}
{% set displayColumn = builderList.displayColumn %}
{% set noRecordsMessage = builderList.noRecordsMessage %}
{% set detailsPage = builderList.detailsPage %}
{% set detailsKeyColumn = builderList.detailsKeyColumn %}
{% set detailsUrlParameter = builderList.detailsUrlParameter %}
{% set recordsPerPage = builderList.recordsPerPage %}


<div role="main" class="main">
	<section class="page-header mb-lg">

		<div class="container">
			<ul class="breadcrumb">
				<li><a href="#">Home</a></li>

				<li><a href="#">Fashion</a></li>
				<li class="active">Dresses</li>
			</ul>
		</div>
	</section>

	<div class="container">
		<div class="row">
			<div class="col-md-9">
				<!--<div class="toolbar mb-none">-->
					<!--<div class="sorter">-->
						<!--<div class="sort-by">-->
							<!--<label>Sort by:</label>-->
							<!--<select>-->
								<!--<option value="Position">Position</option>-->
								<!--<option value="Name">Name</option>-->
								<!--<option value="Price">Price</option>-->
							<!--</select>-->
							<!--<a href="#" title="Set Desc Direction">-->
								<!--<img src="../img/demos/shop/i_asc_arrow.gif" alt="Set Desc Direction">-->
							<!--</a>-->
						<!--</div>-->

						<!--<div class="view-mode">-->
							<!--<span title="Grid">-->
								<!--<i class="fa fa-th"></i>-->
							<!--</span>-->
							<!--<a href="#" title="List">-->
								<!--<i class="fa fa-list-ul"></i>-->
							<!--</a>-->
						<!--</div>-->

						<!--<ul class="pagination">-->
							<!--<li class="active"><a href="#">1</a></li>-->
							<!--<li><a href="#">2</a></li>-->
							<!--<li><a href="#"><i class="fa fa-caret-right"></i></a></li>-->
						<!--</ul>-->

						<!--<div class="limiter">-->
							<!--<label>Show:</label>-->
							<!--<select>-->
								<!--<option value="12">12</option>-->
								<!--<option value="24">24</option>-->
								<!--<option value="36">36</option>-->
							<!--</select>-->
						<!--</div>-->
					<!--</div>-->
				<!--</div>-->

				<ul class="products-grid columns4">
					{% for record in records %}
					<li>
						{# Use spaceless tag to remove spaces inside the A tag. #}
						{% spaceless %}
						{% if detailsPage %}
						<a href="{{ detailsPage|page({ (detailsUrlParameter): attribute(record, detailsKeyColumn) }) }}">

							<div class="product">
								<figure class="product-image-area">
									<a href="{{ detailsPage|page({ (detailsUrlParameter): attribute(record, detailsKeyColumn) }) }}"
									   title="{{ record.name }}"
									   class="product-image">
										<img src="{{ record.product_image.getThumb(80,auto) }}" alt="Product Name">
										<img src="{{ record.product_image.getThumb(80,auto) }}" alt="Product Name" class="product-hover-image">
									</a>

									<a href="{{ detailsPage|page({ (detailsUrlParameter): attribute(record, detailsKeyColumn) }) }}" class="product-quickview">
										<i class="fa fa-share-square-o"></i>
										<span>Quick View</span>
									</a>
								</figure>
								<div class="product-details-area">
									<h2 class="product-name"><a href="{{ detailsPage|page({ (detailsUrlParameter): attribute(record, detailsKeyColumn) }) }}" title="Product Name">{{ record.name }}</a></h2>

									<div class="product-actions">
										<a href="#" class="addtowishlist" title="Add to Wishlist">
											<i class="fa fa-heart"></i>
										</a>
										<a href="#" class="addtocart" title="Add to Cart">
											<i class="fa fa-shopping-cart"></i>
											<span>Add to Cart</span>
										</a>
									</div>
								</div>
							</div>
						</a>
						{% endif %}
						{% endspaceless %}
					</li>
					{% else %}
					<li class="no-data">{{ noRecordsMessage }}</li>
					{% endfor %}
				</ul>

				{% if records.lastPage > 1 %}
				<div class="toolbar-bottom">
					<div class="toolbar">
						<div class="sorter">
							<!--<div class="limiter">-->
								<!--<label>Show:</label>-->
								<!--<select>-->
									<!--<option {{ recordsPerPage == 12 ? 'selected' : null}} value="12">12</option>-->
									<!--<option {{ recordsPerPage == 24 ? 'selected' : null}} value="24">24</option>-->
									<!--<option {{ recordsPerPage == 36 ? 'selected' : null}} value="36">36</option>-->
								<!--</select>-->
							<!--</div>-->

							<ul class="pagination">
								{% if records.currentPage > 1 %}
								<li><a href="{{ this.page.baseFileName|page({ (pageParam): (records.currentPage-1) }) }}">&larr; Prev</a></li>
								{% endif %}

								{% for page in 1..records.lastPage %}
								<li class="{{ records.currentPage == page ? 'active' : null }}">
									<a href="{{ this.page.baseFileName|page({ (pageParam): page }) }}">{{ page }}</a>
								</li>
								{% endfor %}

								{% if records.lastPage > records.currentPage %}
								<li><a href="{{ this.page.baseFileName|page({ (pageParam): (records.currentPage+1) }) }}">Next &rarr;</a></li>
								{% endif %}
							</ul>
						</div>
					</div>
				</div>
				{% endif %}


			</div>

			<aside class="col-md-3 sidebar shop-sidebar">
				<div class="panel-group">
					<div class="panel panel-default">
						<div class="panel-heading">
							<h4 class="panel-title">
								<a class="accordion-toggle" data-toggle="collapse" href="#panel-filter-category">
									Categories
								</a>
							</h4>
						</div>
						<div id="panel-filter-category" class="accordion-body collapse in">
							<div class="panel-body">
								<ul>
									<li><a href="#">Top &amp; Blouses</a></li>
									<li><a href="#">Accessories</a></li>
									<li><a href="#">Pants &amp; Denim</a></li>
									<li><a href="#">Dresses &amp; Skirts</a></li>
								</ul>
							</div>
						</div>
					</div>
					<div class="panel panel-default">
						<div class="panel-heading">
							<h4 class="panel-title">
								<a class="accordion-toggle" data-toggle="collapse" href="#panel-filter-price">
									Price
								</a>
							</h4>
						</div>
						<div id="panel-filter-price" class="accordion-body collapse in">
							<div class="panel-body">
								<div class="filter-price">
									<div id="price-slider"></div>
									<div class="filter-price-details">
										<span>from</span>
										<input type="text" id="price-range-low" class="form-control" placeholder="Min">
										<span>to</span>
										<input type="text" id="price-range-high" class="form-control" placeholder="Max">
										<a href="#" class="btn btn-primary">FILTER</a>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="panel panel-default">
						<div class="panel-heading">
							<h4 class="panel-title">
								<a class="accordion-toggle" data-toggle="collapse" href="#panel-filter-size">
									Size
								</a>
							</h4>
						</div>
						<div id="panel-filter-size" class="accordion-body collapse in">
							<div class="panel-body">
								<ul class="configurable-filter-list">
									<li>
										<a href="#">S</a>
									</li>
									<li>
										<a href="#">M</a>
									</li>
									<li>
										<a href="#">L</a>
									</li>
									<li>
										<a href="#">XL</a>
									</li>
									<li>
										<a href="#">2XL</a>
									</li>
									<li>
										<a href="#">3XL</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<div class="panel panel-default">
						<div class="panel-heading">
							<h4 class="panel-title">
								<a class="accordion-toggle" data-toggle="collapse" href="#panel-filter-brand">
									Brands
								</a>
							</h4>
						</div>
						<div id="panel-filter-brand" class="accordion-body collapse in">
							<div class="panel-body">
								<ul>
									<li><a href="#">Nike</a></li>
									<li><a href="#">Adidas</a></li>
									<li><a href="#">Puma</a></li>
								</ul>
							</div>
						</div>
					</div>
					<div class="panel panel-default">
						<div class="panel-heading">
							<h4 class="panel-title">
								<a class="accordion-toggle" data-toggle="collapse" href="#panel-filter-color">
									color
								</a>
							</h4>
						</div>
						<div id="panel-filter-color" class="accordion-body collapse in">
							<div class="panel-body">
								<ul class="configurable-filter-list filter-list-color">
									<li>
										<a href="#">
											<span style="background-color: #000"></span>
										</a>
									</li>
									<li>
										<a href="#">
											<span style="background-color: #21284f"></span>
										</a>
									</li>
									<li>
										<a href="#">
											<span style="background-color: #272725"></span>
										</a>
									</li>
									<li>
										<a href="#">
											<span style="background-color: #006b20"></span>
										</a>
									</li>
									<li>
										<a href="#">
											<span style="background-color: #68686a"></span>
										</a>
									</li>
									<li>
										<a href="#">
											<span style="background-color: #1736a9"></span>
										</a>
									</li>
									<li>
										<a href="#">
											<span style="background-color: #f6edd1"></span>
										</a>
									</li>
									<li>
										<a href="#">
											<span style="background-color: #a69172"></span>
										</a>
									</li>
									<li>
										<a href="#">
											<span style="background-color: #d8c7a7"></span>
										</a>
									</li>
									<li>
										<a href="#">
											<span style="background-color: #fd9904"></span>
										</a>
									</li>
									<li>
										<a href="#">
											<span style="background-color: #f56ab8"></span>
										</a>
									</li>
									<li>
										<a href="#">
											<span style="background-color: #442937"></span>
										</a>
									</li>
									<li>
										<a href="#">
											<span style="background-color: #bd1721"></span>
										</a>
									</li>
									<li>
										<a href="#">
											<span style="background-color: #1226ad"></span>
										</a>
									</li>
									<li>
										<a href="#">
											<span style="background-color: #cbcbcb"></span>
										</a>
									</li>
									<li>
										<a href="#">
											<span style="background-color: #c7b89a"></span>
										</a>
									</li>
									<li>
										<a href="#">
											<span style="background-color: #fff"></span>
										</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
				</div>

				<h4>Featured</h4>
				<div class="owl-carousel owl-theme" data-plugin-options="{'items':1, 'margin': 5, 'dots': false, 'nav': true}">
					<div>
						<div class="product product-sm">
							<figure class="product-image-area">
								<a href="demo-shop-6-product-details.html" title="Product Name" class="product-image">
									<img src="../img/demos/shop/products/product13.jpg" alt="Product Name">
									<img src="../img/demos/shop/products/product13-2.jpg" alt="Product Name" class="product-hover-image">
								</a>
							</figure>
							<div class="product-details-area">
								<h2 class="product-name"><a href="demo-shop-6-product-details.html" title="Product Name">Diamond Ring - S</a></h2>
								<div class="product-ratings">
									<div class="ratings-box">
										<div class="rating" style="width:0%"></div>
									</div>
								</div>

								<div class="product-price-box">
									<span class="product-price">$220.00</span>
								</div>
							</div>
						</div>

						<div class="product product-sm">
							<figure class="product-image-area">
								<a href="demo-shop-6-product-details.html" title="Product Name" class="product-image">
									<img src="../img/demos/shop/products/product14.jpg" alt="Product Name">
								</a>
							</figure>
							<div class="product-details-area">
								<h2 class="product-name"><a href="demo-shop-6-product-details.html" title="Product Name">Diamond Ring - XL</a></h2>
								<div class="product-ratings">
									<div class="ratings-box">
										<div class="rating" style="width:80%"></div>
									</div>
								</div>

								<div class="product-price-box">
									<span class="product-price">$180.00</span>
								</div>
							</div>
						</div>

						<div class="product product-sm">
							<figure class="product-image-area">
								<a href="demo-shop-6-product-details.html" title="Product Name" class="product-image">
									<img src="../img/demos/shop/products/product15.jpg" alt="Product Name">
								</a>
							</figure>
							<div class="product-details-area">
								<h2 class="product-name"><a href="demo-shop-6-product-details.html" title="Product Name">Diamond Ring - 2XL</a></h2>
								<div class="product-ratings">
									<div class="ratings-box">
										<div class="rating" style="width:0%"></div>
									</div>
								</div>

								<div class="product-price-box">
									<span class="product-price">$240.00</span>
								</div>
							</div>
						</div>
					</div>

					<div>
						<div class="product product-sm">
							<figure class="product-image-area">
								<a href="demo-shop-6-product-details.html" title="Product Name" class="product-image">
									<img src="../img/demos/shop/products/product16.jpg" alt="Product Name">
									<img src="../img/demos/shop/products/product16-2.jpg" alt="Product Name" class="product-hover-image">
								</a>
							</figure>
							<div class="product-details-area">
								<h2 class="product-name"><a href="demo-shop-6-product-details.html" title="Product Name">Diamond Ring - 3XL</a></h2>
								<div class="product-ratings">
									<div class="ratings-box">
										<div class="rating" style="width:60%"></div>
									</div>
								</div>

								<div class="product-price-box">
									<span class="product-price">$220.00</span>
								</div>
							</div>
						</div>

						<div class="product product-sm">
							<figure class="product-image-area">
								<a href="demo-shop-6-product-details.html" title="Product Name" class="product-image">
									<img src="../img/demos/shop/products/product17.jpg" alt="Product Name">
								</a>
							</figure>
							<div class="product-details-area">
								<h2 class="product-name"><a href="demo-shop-6-product-details.html" title="Product Name">Diamond Ring - M</a></h2>
								<div class="product-ratings">
									<div class="ratings-box">
										<div class="rating" style="width:0%"></div>
									</div>
								</div>

								<div class="product-price-box">
									<span class="product-price">$180.00</span>
								</div>
							</div>
						</div>

						<div class="product product-sm">
							<figure class="product-image-area">
								<a href="demo-shop-6-product-details.html" title="Product Name" class="product-image">
									<img src="../img/demos/shop/products/product13.jpg" alt="Product Name">
								</a>
							</figure>
							<div class="product-details-area">
								<h2 class="product-name"><a href="demo-shop-6-product-details.html" title="Product Name">Diamond Ring - XL</a></h2>
								<div class="product-ratings">
									<div class="ratings-box">
										<div class="rating" style="width:80%"></div>
									</div>
								</div>

								<div class="product-price-box">
									<span class="product-price">$240.00</span>
								</div>
							</div>
						</div>
					</div>
				</div>
			</aside>
		</div>
	</div>
</div>

{% put scripts %}
<script>
	$(document).ready(function () {
		$('.limiter>select').on('change', function (event) {
			var $this = $(this);
			var maxitem = $this.val();

			post("/category", {"maxitem": maxitem});
		});
	});

	// Post to the provided URL with the specified parameters.
	function post(path, parameters) {
		var form = $('<form></form>');

		form.attr("method", "post");
		form.attr("action", path);

		$.each(parameters, function(key, value) {
			var field = $('<input></input>');

			field.attr("type", "hidden");
			field.attr("name", key);
			field.attr("value", value);

			form.append(field);
		});

		// The form needs to be a part of the document in
		// order for us to be able to submit it.
		$(document.body).append(form);
		form.submit();
	}
</script>
{% endput %}
